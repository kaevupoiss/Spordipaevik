{% extends "main.html" %}
{% block body %}
{% from "_formhelpers.html" import render_field %}

  <div class="header">
    <a href="{{ url_for('home') }}">
      <button type="button" name="back">Back</button>
    </a>
    <h1>LISA TULEMUS</h1>
  </div>

  <form id="uus_logi" method="post">
    <dl>
      {{ render_field(form.sport) }}
      {{ render_field(form.type) }}
      {{ render_field(form.result) }}
      {# render_field(form.day_posted) #}
    </dl>
    <button type="submit" name="uus_logi">Lisa sooritus</button>
  </form>
  <script type="text/javascript">
      let sport_select = document.getElementById('sport');
      let type_select = document.getElementById('type');

      sport_select.onchange = function() {
        sport = sport_select.value;

        fetch('/new_log/' + sport).then(function(response) {

          response.json().then(function(data) {
              let optionHTML = '';

              for (let type of data.types) {
                optionHTML += '<option value="' + type.id + '">' + type.type + '</option>';
              };

              type_select.innerHTML = optionHTML;
          });
        });
      }
  </script>
{% endblock %}
